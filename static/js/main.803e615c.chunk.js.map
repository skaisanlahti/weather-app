{"version":3,"sources":["components/Weather.js","components/Search.js","components/History.js","App.js","reportWebVitals.js","index.js"],"names":["Weather","props","data","elements","units","name","sys","country","push","undefined","main","temp","toFixed","weather","description","clouds","all","wind","speed","sunrise","timeStr","Date","toLocaleTimeString","sunset","buildDisplay","className","SearchError","searchError","Search","onSubmit","handleSubmit","placeholder","type","value","searchTerm","onChange","handleChange","defaultChecked","History","history","length","map","location","onClick","handleHistoryClick","dotenv","config","App","useState","setSearchTerm","setSearchError","searchUnits","setSearchUnits","setHistory","setUnits","setData","fetchWeatherData","city","a","fetch","process","mode","response","json","cod","updateHistory","console","log","newLocation","newHistory","includes","splice","historySize","unshift","saveHistory","localStorage","setItem","JSON","stringify","useEffect","getItem","localHistory","parse","loadHistory","event","target","preventDefault","innerText","href","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.803e615c.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nfunction Weather(props) {\r\n  const buildDisplay = (data, units) => {\r\n    let elements = [];\r\n    // main fields\r\n    if (data.name && data.sys.country) {\r\n      elements.push(\r\n        <h2>\r\n          {data.name}, {data.sys.country}\r\n        </h2>\r\n      );\r\n    }\r\n    if (data.main.temp !== undefined) {\r\n      const temp = data.main.temp.toFixed(0);\r\n      elements.push(\r\n        <h1>\r\n          {temp} {units === \"metric\" ? \"°C\" : \"°F\"}\r\n        </h1>\r\n      );\r\n    }\r\n    if (data.weather[0].description) {\r\n      elements.push(<h3>{data.weather[0].description}.</h3>);\r\n    }\r\n\r\n    // additional info that might or might not be in the API response\r\n    if (data.clouds.all !== undefined) {\r\n      elements.push(<p>Clouds: {data.clouds.all}%</p>);\r\n    }\r\n    if (data.wind.speed !== undefined) {\r\n      elements.push(\r\n        <p>\r\n          Wind: {data.wind.speed} {units === \"metric\" ? \"m/s\" : \"mph\"}\r\n        </p>\r\n      );\r\n    }\r\n    if (data[\"rain.1h\"] !== undefined) {\r\n      elements.push(<p>Rain: {data[\"rain.1h\"]}</p>);\r\n    }\r\n    if (data[\"snow.1h\"] !== undefined) {\r\n      elements.push(<p>Snow: {data[\"snow.1h\"]}</p>);\r\n    }\r\n    if (data.sys.sunrise !== undefined) {\r\n      const time = new Date(data.sys.sunrise * 1000);\r\n      const timeStr = time.toLocaleTimeString();\r\n      elements.push(<p>Sunrise: {timeStr}</p>);\r\n    }\r\n    if (data.sys.sunset !== undefined) {\r\n      const time = new Date(data.sys.sunset * 1000);\r\n      const timeStr = time.toLocaleTimeString();\r\n      elements.push(<p>Sunset: {timeStr}</p>);\r\n    }\r\n    return elements;\r\n  };\r\n\r\n  if (props.data) {\r\n    const elements = buildDisplay(props.data, props.units);\r\n    return <div className=\"weather\">{elements}</div>;\r\n  }\r\n  return null;\r\n}\r\n\r\nexport default Weather;\r\n","import React from \"react\";\r\n\r\nfunction SearchError(props) {\r\n  if (props.searchError) {\r\n    return <p className=\"error\">Location not found.</p>;\r\n  }\r\n  return <p className=\"error invisible\">Location found.</p>;\r\n}\r\n\r\nfunction Search(props) {\r\n  return (\r\n    <div className=\"city-search\">\r\n      <form onSubmit={props.handleSubmit}>\r\n        <div className=\"search-bar\">\r\n          <input\r\n            className=\"search-left\"\r\n            placeholder=\"Search City\"\r\n            name=\"city\"\r\n            type=\"text\"\r\n            value={props.searchTerm}\r\n            onChange={props.handleChange}\r\n          />\r\n          <input\r\n            className=\"search-right\"\r\n            type=\"submit\"\r\n            name=\"search\"\r\n            value=\"Search\"\r\n            onChange={props.handleChange}\r\n          />\r\n        </div>\r\n        <SearchError searchError={props.searchError} />\r\n        <div className=\"units\" onChange={props.handleChange}>\r\n          <label className=\"radio-label\">\r\n            <input type=\"radio\" value=\"metric\" name=\"units\" defaultChecked />\r\n            Metric\r\n          </label>\r\n          <label className=\"radio-label\">\r\n            <input type=\"radio\" value=\"imperial\" name=\"units\" />\r\n            Imperial\r\n          </label>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Search;\r\n","import React from \"react\";\r\n\r\nfunction History(props) {\r\n  if (props.history.length === 0) {\r\n    return null;\r\n  }\r\n  return (\r\n    <div className=\"history\">\r\n      <h2>History</h2>\r\n      <ul>\r\n        {props.history.map((location) => (\r\n          <li\r\n            className=\"location\"\r\n            key={location}\r\n            onClick={props.handleHistoryClick}\r\n          >\r\n            {location}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default History;\r\n","import React, { useState, useEffect } from \"react\";\nimport Weather from \"./components/Weather\";\nimport Search from \"./components/Search\";\nimport History from \"./components/History\";\nimport dotenv from \"dotenv\";\ndotenv.config();\n\nfunction App() {\n  const API_KEY = process.env.REACT_APP_API_KEY_OPENWEATHERMAP;\n\n  // search fields\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [searchError, setSearchError] = useState(false);\n  const [searchUnits, setSearchUnits] = useState(\"metric\");\n  const [history, setHistory] = useState([]);\n  const historySize = 9;\n\n  // weather fields\n  const [units, setUnits] = useState(\"metric\");\n  const [data, setData] = useState(null);\n\n  // methods\n  const fetchWeatherData = async (city, units) => {\n    try {\n      const response = await fetch(\n        `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=${units}`,\n        { mode: \"cors\" }\n      );\n      const json = await response.json();\n      if (json.cod === 200) {\n        setData(json);\n        setSearchError(false);\n        setUnits(units);\n        updateHistory(history, json.name);\n      } else {\n        setSearchError(true);\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const updateHistory = (history, newLocation) => {\n    let newHistory = [...history];\n    if (newHistory.includes(newLocation)) return;\n    if (newHistory.length >= historySize) {\n      newHistory.splice(historySize - 1, 1);\n    }\n    newHistory.unshift(newLocation);\n    setHistory(newHistory);\n    saveHistory(newHistory);\n  };\n\n  const saveHistory = (history) => {\n    localStorage.setItem(\"history\", JSON.stringify(history));\n  };\n\n  const loadHistory = () => {\n    if (localStorage.getItem(\"history\")) {\n      const localHistory = JSON.parse(localStorage.getItem(\"history\"));\n      setHistory(localHistory);\n    }\n  };\n\n  // load old history on start up\n  useEffect(() => {\n    loadHistory();\n  }, []);\n\n  // form controls\n  const handleChange = (event) => {\n    if (event.target.name === \"city\") setSearchTerm(event.target.value);\n    if (event.target.name === \"units\") setSearchUnits(event.target.value);\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    fetchWeatherData(searchTerm, searchUnits);\n  };\n\n  const handleHistoryClick = (event) => {\n    fetchWeatherData(event.target.innerText, searchUnits);\n  };\n\n  return (\n    <div className=\"app\">\n      <header>\n        <h1>Weather Now</h1>\n        <Search\n          handleChange={handleChange}\n          handleSubmit={handleSubmit}\n          searchError={searchError}\n          searchTerm={searchTerm}\n        />\n      </header>\n      <main className=\"results\">\n        <Weather data={data} units={units} />\n        <History history={history} handleHistoryClick={handleHistoryClick} />\n      </main>\n      <footer>\n        <a href=\"https://openweathermap.org/\">\n          Powered by Open Weather Map API\n        </a>\n      </footer>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./reset.css\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}